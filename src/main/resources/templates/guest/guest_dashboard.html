<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chỗ Tốt Travel - Trang chủ</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        html, body {
            height: 100%;
        }

        body {
            display: flex;
            flex-direction: column;
            background-color: #ffffff; /* Nền trắng */
        }

        .footer {
            margin-top: auto;
        }

        .login-prompt {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1050;
        }

        .login-prompt-content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
        }

        .price-tag {
            font-weight: bold;
            color: #ff5722;
        }

        .province-btn.active {
            border: 2px solid #000;
        }

        .hover\\:text-yellow-500:hover {
            color: #fff;
            background-color: #f9a825; /* Màu vàng trắng */
        }
    </style>
</head>
<body class="bg-white">

    <!-- Navbar -->
    <header>
        <nav class="bg-gray-800 text-white shadow-md fixed top-0 w-full z-10">
            <div class="container mx-auto p-4">
                <div class="flex justify-between items-center">
                    <span class="text-xl font-bold text-white">Chỗ Tốt Travel</span>
                    <div class="space-x-4">
                        <a href="/" class="text-white hover:text-yellow-500">Trang chủ</a>
                        <a href="/about" class="text-white hover:text-yellow-500">Giới thiệu</a>
                        <a href="/contact" class="text-white hover:text-yellow-500">Liên hệ</a>
                        <a th:if="${#authentication == null}" class="btn bg-transparent text-white border border-white rounded-lg py-2 px-4 hover:bg-white hover:text-black" th:href="@{/auth/login}">Đăng nhập</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Bộ lọc Tỉnh -->
    <section class="province-section py-8 mt-32">
        <div class="container mx-auto px-4">
            <h3 class="text-2xl font-semibold mb-4 text-yellow-500">Chọn điểm đến của bạn</h3>
            <div class="province-filter flex flex-wrap gap-2">
                <a th:if="${#authentication != null}" th:href="@{/user/home}" class="province-btn bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600 transition duration-200" th:classappend="${currentProvince == null} ? 'border-2 border-black'">
                    <span>Tất cả</span>
                </a>
                <a th:if="${#authentication == null}" href="#" class="province-btn bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600 transition duration-200 view-detail-btn" th:classappend="${currentProvince == null} ? 'border-2 border-black'">
                    <span>Tất cả</span>
                </a>
                <a th:each="province : ${provinces}" th:if="${#authentication != null}" th:href="@{/user/province/{province}(province=${province})}" class="province-btn bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600 transition duration-200" th:classappend="${currentProvince == province} ? 'border-2 border-black'">
                    <span th:text="${province}"></span>
                </a>
                <a th:each="province : ${provinces}" th:if="${#authentication == null}" href="#" class="province-btn bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600 transition duration-200 view-detail-btn" th:classappend="${currentProvince == province} ? 'border-2 border-black'">
                    <span th:text="${province}"></span>
                </a>
            </div>
        </div>
    </section>

    <!-- Danh sách Homestay -->
    <section class="homestay-list py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                <div class="col-span-1" th:each="homestay : ${homestays}">
                    <div class="card bg-white shadow-lg rounded-lg overflow-hidden">
                        <img th:src="@{${homestay.image}}" class="w-full h-48 object-cover" alt="Homestay Image">
                        <div class="p-4">
                            <h5 class="text-xl font-semibold text-yellow-500" th:text="${homestay.name}"></h5>
                            <p class="text-gray-600">
                                <i class="fas fa-map-marker-alt"></i> <span th:text="${homestay.province}"></span>
                            </p>
                            <div class="flex justify-between items-center mt-4">
                                <span class="price-tag" th:text="${#numbers.formatDecimal(homestay.pricePerNight, 0, 'COMMA', 0, 'POINT')} + ' VNĐ'"></span>
                                <a th:if="${#authentication != null}" th:href="@{/user/homestays/{id}(id=${homestay.id})}" class="bg-yellow-500 text-white py-2 px-4 rounded-md hover:bg-yellow-600">Xem chi tiết</a>
                                <a th:if="${#authentication == null}" href="#" class="bg-yellow-500 text-white py-2 px-4 rounded-md hover:bg-yellow-600 view-detail-btn" data-homestay-id="${homestay.id}">Xem chi tiết</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Login Prompt Modal -->
    <div class="login-prompt" id="loginPrompt">
        <div class="login-prompt-content p-6 rounded-lg bg-white shadow-lg">
            <h4 class="text-xl font-semibold">Vui lòng đăng nhập</h4>
            <p>Bạn cần đăng nhập để xem chi tiết homestay.</p>
            <div class="mt-4 flex justify-center gap-4">
                <a href="/auth/login" class="bg-blue-500 text-white py-2 px-6 rounded-md hover:bg-blue-600">Đăng nhập</a>
                <button class="bg-gray-300 text-gray-800 py-2 px-6 rounded-md hover:bg-gray-400" onclick="closeLoginPrompt()">Đóng</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer bg-gray-800 text-white py-4 mt-auto">
        <div class="container text-center">
            <p class="text-yellow-500">&copy; 2025 Chỗ Tốt Travel. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Hiển thị modal đăng nhập khi click vào nút xem chi tiết
        document.querySelectorAll('.view-detail-btn').forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('loginPrompt').style.display = 'flex';
            });
        });

        // Đóng modal đăng nhập
        function closeLoginPrompt() {
            document.getElementById('loginPrompt').style.display = 'none';
        }
    </script>
</body>
</html>
